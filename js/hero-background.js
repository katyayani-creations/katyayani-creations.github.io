class HeroBackgroundRotator{constructor(){if(this.heroSection=document.querySelector('.hero[data-dynamic-bg="true"]'),this.heroSection){this.layer1=this.heroSection.querySelector(".hero-bg-1"),this.layer2=this.heroSection.querySelector(".hero-bg-2"),this.titleElement=document.getElementById("hero-title"),this.subtitleElement=document.getElementById("hero-subtitle");try{const t=this.heroSection.dataset.banners;this.banners=t?JSON.parse(t):[]}catch(t){this.banners=[]}this.currentIndex=0,this.rotationInterval=3e3,this.intervalId=null,this.init()}}init(){this.banners.length>1&&this.startRotation()}setBackground(t,e){if(!t||!e)return;const n=e.image_url||"images/hero-background.png",i=e.background_color||"#667eea";t.style.background=`linear-gradient(135deg, ${i}CC 0%, ${i}99 100%), url('${n}') center/cover no-repeat`,t.style.backgroundAttachment="scroll"}startRotation(){this.banners.length<=1||(this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.rotateBackground()},this.rotationInterval))}rotateBackground(){if(0===this.banners.length)return;this.currentIndex=(this.currentIndex+1)%this.banners.length;const t=this.banners[this.currentIndex],e=this.layer1.classList.contains("active")?this.layer1:this.layer2,n=e===this.layer1?this.layer2:this.layer1;this.setBackground(n,t),this.updateHeroContent(t),setTimeout(()=>{e.classList.remove("active"),n.classList.add("active")},50)}updateHeroContent(t){t&&(this.titleElement&&(this.titleElement.style.opacity="0.7",this.titleElement.style.transform="translateY(10px)"),this.subtitleElement&&(this.subtitleElement.style.opacity="0.7",this.subtitleElement.style.transform="translateY(10px)"),setTimeout(()=>{this.titleElement&&t.title&&(this.titleElement.textContent=t.title),this.subtitleElement&&t.subtitle&&(this.subtitleElement.textContent=t.subtitle),this.titleElement&&(this.titleElement.style.opacity="1",this.titleElement.style.transform="translateY(0)"),this.subtitleElement&&(this.subtitleElement.style.opacity="1",this.subtitleElement.style.transform="translateY(0)")},300))}stopRotation(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}next(){this.rotateBackground(),this.stopRotation(),this.startRotation()}goTo(t){t>=0&&t<this.banners.length&&(this.currentIndex=t-1,this.rotateBackground(),this.stopRotation(),this.startRotation())}}document.addEventListener("DOMContentLoaded",()=>{const t=new HeroBackgroundRotator;window.heroBackgroundRotator=t,setTimeout(()=>{t.banners.length>1&&t.rotateBackground()},2e3),document.addEventListener("visibilitychange",()=>{document.hidden?t.stopRotation():t.startRotation()})});