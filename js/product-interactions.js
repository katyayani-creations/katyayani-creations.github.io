class ProductInteractions{constructor(){this.wishlistItems=JSON.parse(localStorage.getItem("wishlist")||"[]"),this.cartItems=JSON.parse(localStorage.getItem("cart")||"[]"),this.init()}init(){this.bindEvents(),this.updateWishlistUI(),this.loadQuickViewModal()}bindEvents(){document.addEventListener("click",this.handleClick.bind(this)),document.addEventListener("click",t=>{t.target.closest(".action-btn")&&t.stopPropagation()}),document.addEventListener("keydown",this.handleKeydown.bind(this))}handleClick(t){const e=t.target.closest(".action-btn, .product-card");e&&(e.classList.contains("quick-view")?this.handleQuickView(e):e.classList.contains("wishlist")?this.handleWishlist(e):e.classList.contains("add-to-cart")?this.handleAddToCart(e):e.classList.contains("product-card")&&!e.closest(".action-btn")&&this.handleProductClick(e))}handleKeydown(t){"Escape"===t.key&&this.closeQuickView()}handleProductClick(t){const e=t.dataset.productUrl;e&&(t.style.transform="scale(0.98)",setTimeout(()=>{window.location.href=e},100))}handleQuickView(t){const e=t.dataset.productId;this.showQuickView(e)}handleWishlist(t){const e=t.dataset.productId;t.classList.add("loading"),setTimeout(()=>{this.wishlistItems.includes(e)?(this.removeFromWishlist(e),this.showToast("Removed from wishlist","warning")):(this.addToWishlist(e),this.showToast("Added to wishlist ❤️","success")),t.classList.remove("loading"),this.updateWishlistUI()},500)}handleAddToCart(t){const e=t.dataset.productId,i=t.closest(".product-card"),s=i.querySelector("h3")?.textContent||"Product";t.classList.add("loading"),setTimeout(()=>{this.addToCart(e),t.classList.remove("loading"),t.classList.add("success"),this.showToast(`${s} added to cart! 🛒`,"success"),setTimeout(()=>{t.classList.remove("success")},2e3)},800)}addToWishlist(t){this.wishlistItems.includes(t)||(this.wishlistItems.push(t),localStorage.setItem("wishlist",JSON.stringify(this.wishlistItems)))}removeFromWishlist(t){this.wishlistItems=this.wishlistItems.filter(e=>e!==t),localStorage.setItem("wishlist",JSON.stringify(this.wishlistItems))}addToCart(t){const e=this.cartItems.find(e=>e.id===t);e?e.quantity+=1:this.cartItems.push({id:t,quantity:1}),localStorage.setItem("cart",JSON.stringify(this.cartItems)),this.updateCartCount()}updateWishlistUI(){document.querySelectorAll(".wishlist").forEach(t=>{const e=t.dataset.productId;this.wishlistItems.includes(e)?(t.classList.add("active"),t.title="Remove from Wishlist"):(t.classList.remove("active"),t.title="Add to Wishlist")})}updateCartCount(){const t=this.cartItems.reduce((t,e)=>t+e.quantity,0);document.querySelectorAll(".cart-count").forEach(e=>{e.textContent=t,t>0&&(e.style.display="block")})}showQuickView(t){const e=document.getElementById("quickViewModal");if(!e)return void console.error("Quick view modal not found");const i=e.querySelector(".quick-view-content");i.innerHTML='\n            <div style="padding: 40px; text-align: center;">\n                <div style="display: inline-block; width: 40px; height: 40px; border: 3px solid #f3f3f3; border-top: 3px solid #ff6b6b; border-radius: 50%; animation: spin 1s linear infinite;"></div>\n                <p style="margin-top: 16px; color: #666;">Loading product details...</p>\n            </div>\n        ',e.classList.add("active"),document.body.style.overflow="hidden",setTimeout(()=>{this.loadQuickViewContent(t,i)},1e3)}loadQuickViewContent(t,e){e.innerHTML=`\n            <button class="quick-view-close" onclick="productInteractions.closeQuickView()">×</button>\n            <div style="padding: 24px;">\n                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: start;">\n                    <div>\n                        <img src="https://via.placeholder.com/300x300" alt="Product" style="width: 100%; border-radius: 8px;">\n                    </div>\n                    <div>\n                        <h2 style="margin: 0 0 16px 0; color: #333;">Product Name</h2>\n                        <div style="margin-bottom: 16px;">\n                            <span style="font-size: 1.5em; font-weight: bold; color: #e74c3c;">₹1,350</span>\n                            <span style="text-decoration: line-through; color: #999; margin-left: 8px;">₹1,500</span>\n                            <span style="background: #2ecc71; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; margin-left: 8px;">10% OFF</span>\n                        </div>\n                        <p style="color: #666; line-height: 1.6; margin-bottom: 24px;">\n                            This is a beautiful product with amazing features that will enhance your home decor.\n                        </p>\n                        <div style="display: flex; gap: 12px;">\n                            <button onclick="productInteractions.addToCart('${t}')" style="flex: 1; background: #2ecc71; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600;">\n                                Add to Cart\n                            </button>\n                            <button onclick="productInteractions.goToProduct('${t}')" style="flex: 1; background: #3498db; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600;">\n                                View Details\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}closeQuickView(){const t=document.getElementById("quickViewModal");t&&(t.classList.remove("active"),document.body.style.overflow="")}goToProduct(t){const e=document.querySelector(`[data-product-id="${t}"]`);e&&e.dataset.productUrl&&(window.location.href=e.dataset.productUrl)}loadQuickViewModal(){if(!document.getElementById("quickViewModal")){const t=document.createElement("div");t.id="quickViewModal",t.className="quick-view-modal",t.innerHTML='<div class="quick-view-content"></div>',document.body.appendChild(t),t.addEventListener("click",e=>{e.target===t&&this.closeQuickView()})}}showToast(t,e="success"){const i=document.querySelector(".toast-notification");i&&i.remove();const s=document.createElement("div");s.className=`toast-notification ${e}`,s.textContent=t,document.body.appendChild(s),setTimeout(()=>s.classList.add("show"),100),setTimeout(()=>{s.classList.remove("show"),setTimeout(()=>s.remove(),300)},3e3)}}document.addEventListener("DOMContentLoaded",()=>{window.productInteractions=new ProductInteractions}),window.ProductInteractions=ProductInteractions;